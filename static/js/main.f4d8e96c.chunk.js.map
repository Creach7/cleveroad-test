{"version":3,"sources":["redux/actions.js","firebase/firebase.js","components/add-product/add-product.js","components/authorization/authorization.js","components/edit-product/edit-product.js","components/products-list-item/products-list-item.js","components/products-list/products-list.js","components/App/App.js","redux/reducer.js","redux/store.js","index.js"],"names":["pageChanged","newPage","type","payload","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","setProductsFun","a","getDocs","collection","querySnapshot","ret","forEach","doc","push","data","id","loadImage","productID","file","fun","storage","getStorage","storageRef","ref","name","split","pop","uploadTask","uploadBytesResumable","on","snapshot","progress","bytesTransferred","totalBytes","console","log","state","error","code","getDownloadURL","then","downloadURL","deleteImage","format","desertRef","deleteObject","catch","updateProduct","update_date","updateDoc","product","ph","photo","addDoc","docRef","alert","deleteDoc","mapDispatchToProps","connect","user","disRef","React","createRef","className","onClick","onSubmit","e","preventDefault","addProduct","heading","target","value","files","description","price","discount_percent","discount_end_date","user_id","uid","required","minLength","maxLength","alt","accept","onChange","imgCheck","wh","fr","FileReader","onload","img","Image","width","height","src","result","readAsDataURL","step","min","max","current","D","Date","setDate","getDate","dateCheck","date","getFullYear","getMonth","getMinDate","userUpdate","dir","successFun","nativeEvent","submitter","email","password","errorFun","auth","getAuth","signInWithEmailAndPassword","userCredential","errorCode","errorMessage","message","signIn","createUserWithEmailAndPassword","create","productInfo","isChanged","update","photoUrl","defaultValue","href","rel","editProduct","Days","Math","floor","getTime","flag","num","res","match","window","confirm","deleteProduct","substring","length","style","paddingLeft","productsUpdate","products","useEffect","getProducts","map","page","Pages","initialState","reducer","action","store","createStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f4d8e96c.chunk.js","sourcesContent":["const pageChanged = (newPage) => {\r\n  return {\r\n    type: 'PAGE_CHANGED',\r\n    payload: newPage\r\n  }\r\n};\r\n\r\nconst userUpdate = (user) => {\r\n  return {\r\n    type: 'USER_UPDATE',\r\n    payload: user\r\n  }\r\n};\r\n\r\nconst productsUpdate = (products) => {\r\n  return {\r\n    type: 'PRODUCTS_UPDATE',\r\n    payload: products\r\n  }\r\n};\r\n\r\nconst editProduct = (productInfo) => {\r\n  return {\r\n    type: 'EDIT_PRODUCT',\r\n    payload: productInfo\r\n  }\r\n};\r\n\r\nexport {\r\n  pageChanged,\r\n  userUpdate,\r\n  productsUpdate,\r\n  editProduct\r\n}","// Import the functions you need from the SDKs you need\r\nimport { initializeApp } from \"firebase/app\";\r\n// import { getAnalytics } from \"firebase/analytics\";\r\nimport { getFirestore, collection, getDocs, addDoc, doc, updateDoc, deleteDoc } from \"firebase/firestore\"\r\nimport { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from \"firebase/auth\";\r\nimport { getStorage, ref, uploadBytesResumable, getDownloadURL, deleteObject } from \"firebase/storage\";\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyAskY_IqIUIDUanOeYz__CvNEykXTwGlZw\",\r\n  authDomain: \"cleveroad-test-1c158.firebaseapp.com\",\r\n  projectId: \"cleveroad-test-1c158\",\r\n  storageBucket: \"cleveroad-test-1c158.appspot.com\",\r\n  messagingSenderId: \"298455748492\",\r\n  appId: \"1:298455748492:web:978e72811e4165be4310a9\",\r\n  measurementId: \"G-3B1QRQQLVZ\"\r\n};\r\n\r\n// Initialize Firebase\r\n// const app = initializeApp(firebaseConfig);\r\ninitializeApp(firebaseConfig)\r\n// const analytics = getAnalytics(app);\r\nconst db = getFirestore();\r\n\r\nfunction signIn(email, password, successFun, errorFun) {\r\n  const auth = getAuth();\r\n  signInWithEmailAndPassword(auth, email, password)\r\n    .then((userCredential) => {\r\n      // Signed in \r\n      const user = userCredential.user;\r\n      // ...\r\n      // console.dir(auth);\r\n      successFun(user);\r\n    })\r\n    .catch((error) => {\r\n      const errorCode = error.code;\r\n      const errorMessage = error.message;\r\n      // ...\r\n      console.log(errorCode, errorMessage);\r\n      errorFun();\r\n    });\r\n}\r\nfunction create(email, password, successFun, errorFun) {\r\n  const auth = getAuth();\r\n  createUserWithEmailAndPassword(auth, email, password)\r\n    .then((userCredential) => {\r\n      // Signed in \r\n      const user = userCredential.user;\r\n      // ...\r\n      successFun(user);\r\n    })\r\n    .catch((error) => {\r\n      const errorCode = error.code;\r\n      const errorMessage = error.message;\r\n      // ..\r\n      console.log(errorCode, errorMessage);\r\n      errorFun();\r\n    });\r\n}\r\n\r\n\r\nasync function getProducts(setProductsFun) {\r\n  const querySnapshot = await getDocs(collection(db, \"products\"));\r\n  const ret = [];\r\n  querySnapshot.forEach((doc) => {\r\n    // console.dir(doc);\r\n    // console.log(`${doc.id} => ${doc.data().photo}`);\r\n    ret.push({\r\n      ...doc.data(),\r\n      id: doc.id\r\n    });\r\n  });\r\n  setProductsFun(ret);\r\n}\r\n\r\n\r\nfunction loadImage(productID, file, fun) {\r\n  const storage = getStorage();\r\n  // // Create the file metadata\r\n  // /** @type {any} */\r\n  // const metadata = {\r\n  //   contentType: 'image/jpeg'\r\n  // };\r\n\r\n  // Upload file and metadata to the object 'images/mountains.jpg'\r\n  const storageRef = ref(storage, `${productID}/image.${file.name.split('.').pop()}`);\r\n  // const uploadTask = uploadBytesResumable(storageRef, file, metadata);\r\n  const uploadTask = uploadBytesResumable(storageRef, file);\r\n\r\n  // Listen for state changes, errors, and completion of the upload.\r\n  uploadTask.on('state_changed',\r\n    (snapshot) => {\r\n      // Get task progress, including the number of bytes uploaded and the total number of bytes to be uploaded\r\n      const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\r\n      console.log('Upload is ' + progress + '% done');\r\n      switch (snapshot.state) {\r\n        case 'paused':\r\n          console.log('Upload is paused');\r\n          break;\r\n        case 'running':\r\n          console.log('Upload is running');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    (error) => {\r\n      // A full list of error codes is available at\r\n      // https://firebase.google.com/docs/storage/web/handle-errors\r\n      switch (error.code) {\r\n        case 'storage/unauthorized':\r\n          // User doesn't have permission to access the object\r\n          break;\r\n        case 'storage/canceled':\r\n          // User canceled the upload\r\n          break;\r\n        // ...\r\n        case 'storage/unknown':\r\n          // Unknown error occurred, inspect error.serverResponse\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    () => {\r\n      // Upload completed successfully, now we can get the download URL\r\n      getDownloadURL(uploadTask.snapshot.ref).then((downloadURL) => {\r\n        console.log('File available at', downloadURL);\r\n        fun(downloadURL);\r\n      });\r\n    }\r\n  );\r\n}\r\n\r\nfunction deleteImage(id, format) {\r\n  const storage = getStorage();\r\n  const desertRef = ref(storage, `${id}/image.${format}`);\r\n  deleteObject(desertRef).then(() => {\r\n    // File deleted successfully\r\n  }).catch((error) => {\r\n    // Uh-oh, an error occurred!\r\n  });\r\n}\r\n\r\nasync function updateProduct(id, update_date) {\r\n  const ref = doc(db, \"products\", id);\r\n  await updateDoc(ref, update_date);\r\n}\r\n\r\nasync function addProduct(product, fun) {\r\n  try {\r\n    const ph = product.photo;\r\n    product.photo = '';\r\n\r\n    const docRef = await addDoc(collection(db, \"products\"), product);\r\n    console.log(\"Document written with ID: \", docRef.id);\r\n    loadImage(docRef.id, ph, (downloadURL) => {\r\n      // product.photo = downloadURL;\r\n      // console.log(downloadURL);\r\n      updateProduct(docRef.id, { photo: downloadURL });\r\n    });\r\n    fun();\r\n  } catch (e) {\r\n    console.error(\"Error adding document: \", e);\r\n    alert('addProduct Error');\r\n  }\r\n}\r\n\r\nasync function deleteProduct(id, format) {\r\n  await deleteDoc(doc(db, \"products\", id));\r\n  deleteImage(id, format);\r\n}\r\n\r\nexport { signIn, create, getProducts, addProduct, updateProduct, deleteProduct, loadImage, deleteImage };","import './add-pruduct.css';\r\nimport React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { pageChanged } from '../../redux/actions';\r\nimport { addProduct } from '../../firebase/firebase';\r\n\r\nfunction AddProduct({ user, pageChanged }) {\r\n  const getMinDate = () => {\r\n    const D = new Date();\r\n    D.setDate(D.getDate() + 1);\r\n    const dateCheck = (date) => {\r\n      return (date < 10) ? `0${date}` : date;\r\n    }\r\n    return `${D.getFullYear()}-${dateCheck(D.getMonth() + 1)}-${dateCheck(D.getDate())}`\r\n  }\r\n  const disRef = React.createRef();\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    // console.dir(e);\r\n    const product = {\r\n      heading: e.target[0].value,\r\n      photo: e.target[1].files[0],\r\n      description: e.target[2].value,\r\n      price: e.target[3].value,\r\n      discount_percent: e.target[4].value,\r\n      discount_end_date: e.target[5].value,\r\n      user_id: user.uid\r\n    }\r\n    addProduct(product, () => { pageChanged('ProductsList') });\r\n  }\r\n  return (\r\n    <div className={'add-product__page'}>\r\n      <button className='add-product__close_button' onClick={() => pageChanged('ProductsList')}>✖</button>\r\n      <form className='add-product__container' onSubmit={onSubmit}>\r\n        <p>Заголовок</p>\r\n        <input name='heading' type=\"text\" required minLength='20' maxLength='40' />\r\n        <p>Фото</p>\r\n        <input name='photo' type='file' alt='image' required accept='image/*' onChange={\r\n          (e) => {\r\n            const imgCheck = (wh) => (wh >= 200 && wh <= 4000);\r\n            const fr = new FileReader();\r\n            fr.onload = () => {\r\n              const img = new Image();\r\n              img.onload = () => {\r\n                if (!imgCheck(img.width) || !imgCheck(img.height)) {\r\n                  alert('Ширина и высота изображения должны быть больше 200 и меньше 4000');\r\n                  e.target.value = '';\r\n                }\r\n              };\r\n              img.src = fr.result;\r\n            };\r\n            fr.readAsDataURL(e.target.files[0]);\r\n          }\r\n        } />\r\n        <p>Описание</p>\r\n        <textarea name='description' type='text' maxLength='200' />\r\n        <p>Цена</p>\r\n        <input name='price' type='number' required step=\"0.01\" min='0' max='99999999.99' />\r\n        <p>Скидка</p>\r\n        <input name='discount-percent' type='number' min='10' max='90' onChange={\r\n          (e) => {\r\n            if ((e.target.value !== '') !== (disRef.current.required)) {\r\n              disRef.current.required = (e.target.value !== '');\r\n            }\r\n          }\r\n        } />\r\n        <p>Дата окончания скидки</p>\r\n        <input name='discount-end-date' type='date' min={getMinDate()} ref={disRef} />\r\n        <button>Добавить продукт</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ user }) => {\r\n  return {\r\n    user\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  pageChanged\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(AddProduct);","import React from 'react';\r\nimport { userUpdate, pageChanged } from '../../redux/actions';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { signIn, create } from '../../firebase/firebase';\r\n\r\nimport './authorization.css';\r\n\r\nfunction Authorization({ userUpdate, pageChanged }) {\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.dir(e);\r\n    const successFun = (user) => {\r\n      // console.dir(user);\r\n      userUpdate(user);\r\n      pageChanged('ProductsList')\r\n    }\r\n    switch (e.nativeEvent.submitter.name) {\r\n      case 'signIn':\r\n\r\n        const errorFun = () => {\r\n          alert('Неправельный email или пароль');\r\n        }\r\n        signIn(e.target[0].value, e.target[1].value, successFun, errorFun);\r\n        break;\r\n      case 'create':\r\n        const errorFun2 = () => {\r\n          alert('Ошибка регистрации');\r\n        }\r\n        create(e.target[0].value, e.target[1].value, successFun, errorFun2);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n  return (\r\n    <div className={'authorization__page'}>\r\n      <form onSubmit={onSubmit}>\r\n        <p>Email</p>\r\n        <input name='email' type='email' required />\r\n        <p>Password</p>\r\n        <input name='password' type='password' required />\r\n        <button name='signIn'>Войти</button>\r\n        <button name='create'>Зарегестрироватся</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\nconst mapStateToProps = () => {\r\n  return {\r\n\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  userUpdate,\r\n  pageChanged\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Authorization);","import './edit-product.css';\r\nimport React from 'react';\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport { pageChanged } from '../../redux/actions';\r\nimport { updateProduct, deleteImage, loadImage } from '../../firebase/firebase';\r\n\r\nfunction EditProduct({ productInfo, pageChanged }) {\r\n  const { id = '', heading = '', photo = '', description = '', price = '', discount_percent = '', discount_end_date = '' } = productInfo;\r\n  const getMinDate = () => {\r\n    const D = new Date();\r\n    D.setDate(D.getDate() + 1);\r\n    const dateCheck = (date) => {\r\n      return (date < 10) ? `0${date}` : date;\r\n    }\r\n    return `${D.getFullYear()}-${dateCheck(D.getMonth() + 1)}-${dateCheck(D.getDate())}`\r\n  }\r\n  const disRef = React.createRef();\r\n\r\n  const isChanged = {\r\n    heading: false,\r\n    photo: false,\r\n    description: false,\r\n    price: false,\r\n    discount_percent: false,\r\n    discount_end_date: false,\r\n  }\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    const update = {};\r\n    if (isChanged.heading) {\r\n      update.heading = e.target[0].value;\r\n    }\r\n    if (isChanged.photo) {\r\n      update.photo = e.target[1].files[0];\r\n    }\r\n    if (isChanged.description) {\r\n      update.description = e.target[2].value;\r\n    }\r\n    if (isChanged.price) {\r\n      update.price = e.target[3].value;\r\n    }\r\n    if (isChanged.discount_percent) {\r\n      update.discount_percent = e.target[4].value;\r\n    }\r\n    if (isChanged.discount_end_date) {\r\n      update.discount_end_date = e.target[5].value;\r\n    }\r\n\r\n    if (isChanged.photo) {\r\n      deleteImage(id);\r\n      loadImage(id, update.photo, function (photoUrl) {\r\n        console.log(update);\r\n        updateProduct(id, {\r\n          ...update,\r\n          photo: photoUrl\r\n        });\r\n      });\r\n    } else {\r\n      updateProduct(id, update);\r\n    }\r\n    pageChanged('ProductsList');\r\n  }\r\n  return (\r\n    <div className={'edit-product__page'}>\r\n      <button className='edit-product__close_button' onClick={() => pageChanged('ProductsList')}>✖</button>\r\n      <form className='edit-product__container' onSubmit={onSubmit}>\r\n        <p>Заголовок</p>\r\n        <input name='heading' defaultValue={heading} type=\"text\" required minLength='20' maxLength='40' onChange={() => isChanged.heading = true} />\r\n        <p>Фото</p>\r\n        <a href={photo} target=\"_blank\" rel=\"noreferrer\">Фото сейчас</a>\r\n        <input name='photo' type='file' alt='image' accept='image/*' onChange={\r\n          (e) => {\r\n            const imgCheck = (wh) => (wh >= 200 && wh <= 4000);\r\n            const fr = new FileReader();\r\n            fr.onload = () => {\r\n              const img = new Image();\r\n              img.onload = () => {\r\n                if (!imgCheck(img.width) || !imgCheck(img.height)) {\r\n                  alert('Ширина и высота изображения должны быть больше 200 и меньше 4000');\r\n                  e.target.value = '';\r\n                } else {\r\n                  isChanged.photo = true;\r\n                }\r\n              };\r\n              img.src = fr.result;\r\n            };\r\n            fr.readAsDataURL(e.target.files[0]);\r\n          }\r\n        } />\r\n        <p>Описание</p>\r\n        <textarea name='description' defaultValue={description} type='text' maxLength='200' onChange={() => isChanged.description = true} />\r\n        <p>Цена</p>\r\n        <input name='price' defaultValue={price} type='number' required step=\"0.01\" min='0' max='99999999.99' onChange={() => isChanged.price = true} />\r\n        <p>Скидка</p>\r\n        <input name='discount-percent' defaultValue={discount_percent} type='number' min='10' max='90' onChange={\r\n          (e) => {\r\n            if ((e.target.value !== '') !== (disRef.current.required)) {\r\n              disRef.current.required = (e.target.value !== '');\r\n            }\r\n            isChanged.discount_percent = true;\r\n          }\r\n        } />\r\n        <p>Дата окончания скидки</p>\r\n        <input name='discount-end-date' defaultValue={discount_end_date} type='date' min={getMinDate()} ref={disRef} onChange={() => isChanged.discount_end_date = true} />\r\n        <button>Изменить</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ productInfo }) => {\r\n  return {\r\n    productInfo\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  pageChanged\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditProduct);","import React from 'react';\r\nimport './products-list-item.css';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { deleteProduct } from '../../firebase/firebase';\r\nimport { pageChanged, editProduct } from '../../redux/actions';\r\n\r\nfunction ProductsListItem({ product, user, pageChanged, editProduct }) {\r\n  const { heading = '', photo = '', description = '', price = '', discount_percent = '', discount_end_date = '', user_id = '' } = product;\r\n  const Days = Math.floor(((new Date(discount_end_date)).getTime() - (new Date()).getTime()) / (1000 * 60 * 60 * 24));\r\n  const flag = (discount_percent !== '' && Days >= 0);\r\n\r\n  const editThisProduct = () => {\r\n    editProduct(product);\r\n    pageChanged('EditProduct');\r\n  }\r\n  const deleteThisProduct = () => {\r\n    const res = photo.match(/image\\..+\\?/)[0].split('.').pop();\r\n    if (window.confirm('Вы уверены что хотите удалить продукт?')) {\r\n      deleteProduct(product.id, res.substring(0, res.length - 1));\r\n      pageChanged('ProductsList');\r\n    }\r\n  }\r\n  const floor = (num) => {\r\n    return Math.floor(100 * num) / 100;\r\n  }\r\n  return (\r\n    <div className={'products-list-item__container'}>\r\n      {\r\n        (user_id === user.uid) ?\r\n          (<div className=\"dropdown\">\r\n            <button className=\"dropbtn\">⚙</button>\r\n            <div className=\"dropdown-content\">\r\n              <button onClick={editThisProduct}>Редактировать</button>\r\n              <button onClick={deleteThisProduct}>Удалить</button>\r\n            </div>\r\n          </div>) : ''\r\n      }\r\n      <div className='products-list-item__photo-container'>\r\n        <img className='products-list-item__photo' src={photo} alt={heading} />\r\n      </div>\r\n      <p className={'products-list-item__heading'}>{heading}</p>\r\n      <p className={'products-list-item__description'}>{description}</p>\r\n      <div className={'products-list-item__price-container'}>\r\n        <p className={flag ? 'products-list-item__line-through' : ''}>{`${floor(price)}$`}</p>\r\n        {\r\n          flag ? <p style={{ paddingLeft: '10px' }}>{`${floor(price * ((100 - discount_percent) / 100))}$ (Осталось дней: ${Days + 1})`}</p> : ''\r\n        }\r\n      </div>\r\n    </div >\r\n  )\r\n}\r\nconst mapStateToProps = ({ user }) => {\r\n  return {\r\n    user\r\n  };\r\n}\r\nconst mapDispatchToProps = {\r\n  pageChanged,\r\n  editProduct\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductsListItem);","import React, { useEffect } from 'react';\r\nimport './products-list.css';\r\nimport ProductsListItem from \"../products-list-item/products-list-item\";\r\nimport { connect } from 'react-redux';\r\n\r\nimport { getProducts } from '../../firebase/firebase';\r\n\r\nimport { productsUpdate, pageChanged } from '../../redux/actions';\r\n\r\nfunction ProductsList({ products, productsUpdate, pageChanged }) {\r\n  useEffect(() => {\r\n    // console.log('ProductsList');\r\n    getProducts(productsUpdate);\r\n  }, []);\r\n  return (\r\n    <div className={'product-list__page'}>\r\n      <button className={'product-list__button'} onClick={() => { pageChanged('AddProduct') }}>Добавить продукт</button>\r\n      <div className={'product-list__container'}>\r\n        {products.map((product) => <ProductsListItem key={product.id} product={product} />)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({ products }) => {\r\n  return {\r\n    products\r\n  };\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  productsUpdate,\r\n  pageChanged\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ProductsList);","import AddProduct from \"../add-product/add-product\";\nimport Authorization from \"../authorization/authorization\";\nimport EditProduct from \"../edit-product/edit-product\";\nimport ProductsList from \"../products-list/products-list\";\n// import { app, analytics } from '../../firebase/firebase.js';\nimport { connect } from 'react-redux';\n\nimport './App.css';\n\nfunction App({ page }) {\n  const Pages = () => {\n    switch (page) {\n      case 'Authorization':\n        return <Authorization />;\n      case 'AddProduct':\n        return <AddProduct />;\n      case 'EditProduct':\n        return <EditProduct />;\n      case 'ProductsList':\n        return <ProductsList />;\n      default:\n        return <div></div>;\n    }\n  }\n  return (\n    <div className=\"App\">\n      {\n        Pages()\n      }\n    </div>\n  );\n}\n\nconst mapStateToProps = ({ page }) => {\n  return {\n    page\n  };\n}\n\nexport default connect(mapStateToProps)(App);\n","const initialState = {\r\n  products: [],\r\n  page: 'Authorization',\r\n  // page: 'ProductsList',\r\n  user: '',\r\n  productInfo: {}\r\n}\r\nconst reducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'PAGE_CHANGED':\r\n      return {\r\n        ...state,\r\n        page: action.payload\r\n      };\r\n    case 'USER_UPDATE':\r\n      return {\r\n        ...state,\r\n        user: action.payload\r\n      }\r\n    case 'PRODUCTS_UPDATE':\r\n      return {\r\n        ...state,\r\n        products: action.payload\r\n      }\r\n    case 'EDIT_PRODUCT':\r\n      return {\r\n        ...state,\r\n        productInfo: action.payload\r\n      }\r\n    default:\r\n      return state;\r\n  }\r\n}\r\nexport default reducer;","import { createStore } from 'redux';\r\nimport reducer from './reducer';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App/App';\nimport { Provider } from 'react-redux';\nimport store from './redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}